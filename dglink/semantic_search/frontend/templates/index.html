<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Synapse KG Semantic Search</title>

    <!-- Bootstrap CSS -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
        crossorigin="anonymous"
    >

    <!-- Optional custom styles -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">

    <style>
        .option-img {
            width: 250px;
            height: auto;
        }
        .option-card {
            text-align: center;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-5">Synapse KG Semantic Search</h1>

        <form method="POST" class="card shadow p-4">
            <div class="mb-3">
                <label for="Agent" class="form-label">Agent</label>
                <input type="text" id="Agent" name="Agent" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="Relation" class="form-label">Relation</label>
                <input type="text" id="Relation" name="Relation" class="form-control">
            </div>

            <div class="mb-4">
                <label for="OtherAgent" class="form-label">Other Agent</label>
                <input type="text" id="OtherAgent" name="OtherAgent" class="form-control">
            </div>

            <h5 class="mb-3">Agent Role:</h5>

            <div class="row text-center mb-4">
                <!-- Option 1 -->
                <div class="col-md-4 mb-3">
                    <div class="option-card card p-3">
                        <img 
                            src="{{ url_for('static', filename='subject_object.png') }}" 
                            alt="Subject/Object" 
                            class="option-img mx-auto mb-3"
                        >
                        <div class="form-check d-flex justify-content-center">
                            <input 
                                class="form-check-input me-2" 
                                type="radio" 
                                id="Subject/Object" 
                                name="QueryType" 
                                value="Subject/Object"
                            >
                            <label class="form-check-label" for="Subject/Object">
                                Subject/Object
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Option 2 -->
                <div class="col-md-4 mb-3">
                    <div class="option-card card p-3">
                        <img 
                            src="{{ url_for('static', filename='subject.png') }}" 
                            alt="Subject" 
                            class="option-img mx-auto mb-3"
                        >
                        <div class="form-check d-flex justify-content-center">
                            <input 
                                class="form-check-input me-2" 
                                type="radio" 
                                id="Subject" 
                                name="QueryType" 
                                value="Subject" 
                                checked
                            >
                            <label class="form-check-label" for="Subject">
                                Subject
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Option 3 -->
                <div class="col-md-4 mb-3">
                    <div class="option-card card p-3">
                        <img 
                            src="{{ url_for('static', filename='object.png') }}" 
                            alt="Object" 
                            class="option-img mx-auto mb-3"
                        >
                        <div class="form-check d-flex justify-content-center">
                            <input 
                                class="form-check-input me-2" 
                                type="radio" 
                                id="Object" 
                                name="QueryType" 
                                value="Object"
                            >
                            <label class="form-check-label" for="Object">
                                Object
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg px-4">
                    Search
                </button>
            </div>
        </form>

    {% if result %}
    <div class="mt-5">
        <h2>Results:</h2>
        <ul class="list-group">
            {% for row in result %}
            <li class="list-group-item">
                <ul class="list-unstyled ms-3">
                    {% for entry in row %}
                    <li class="mb-1">
                        {% if entry.url %}
                            <a href="{{ entry.url }}" target="_blank" class="link-primary text-decoration-none">
                                {{ entry.text }}
                            </a>
                        {% else %}
                            {{ entry.text }}
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    </div>

    <!-- Bootstrap JS (optional) -->
    <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+Jv0a0I1pUcZ4l+Amk08y+YtC1g5r" 
        crossorigin="anonymous">
    </script>
</body>
</html>
